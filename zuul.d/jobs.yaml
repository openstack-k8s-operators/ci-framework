- job:
    name: cifmw-molecule-base
    nodeset: centos-9-crc-xl
    parent: base-minimal
    pre-run: ci/playbooks/molecule-prepare.yml
    run: ci/playbooks/molecule-test.yml
    post-run: ci/playbooks/collect-logs.yml
    required-projects:
      - github.com/openstack-k8s-operators/install_yamls
- job:
    name: cifmw-molecule-artifacts
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: artifacts
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/artifacts/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-build_openstack_packages
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: build_openstack_packages
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/build_openstack_packages/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-ci_setup
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: ci_setup
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/ci_setup/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-copy_container
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: copy_container
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/copy_container/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-discover_latest_image
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: discover_latest_image
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/discover_latest_image/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-edpm_deploy
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: edpm_deploy
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/edpm_deploy/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-edpm_prepare
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: edpm_prepare
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/edpm_prepare/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-install_ca
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: install_ca
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/install_ca/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-install_yamls
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: install_yamls
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/install_yamls/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-libvirt_manager
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: libvirt_manager
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/libvirt_manager/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-operator_build
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: operator_build
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/operator_build/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-operator_deploy
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: operator_deploy
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/operator_deploy/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-pkg_build
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: pkg_build
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/pkg_build/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-registry_deploy
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: registry_deploy
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/registry_deploy/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-repo_setup
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: repo_setup
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/repo_setup/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-rhol_crc
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: rhol_crc
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/rhol_crc/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-run_hook
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: run_hook
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/run_hook/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-test_deps
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: test_deps
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/test_deps/(?!meta).*
      - ^ci/playbooks/molecule.*
- job:
    name: cifmw-molecule-wonderful_role
    parent: cifmw-molecule-base
    vars:
      TEST_RUN: wonderful_role
    files:
      - ^ansible-requirements.txt
      - ^molecule-requirements.txt
      - ^ci_framework/roles/wonderful_role/(?!meta).*
      - ^ci/playbooks/molecule.*
