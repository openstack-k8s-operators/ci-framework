---
- name: Run devscripts
  tags:
    - devscripts_layout
  block:
    - name: Deploy devscripts layout
      ansible.builtin.import_role:
        name: devscripts

- name: Generate devscripts inventory
  tags:
    - devscripts_inventory
  ansible.builtin.import_tasks: devscripts_inventory.yml

- name: Slurp devscripts private key
  register: _devscript_privkey
  ansible.builtin.slurp:
    path: >-
      {{
        (cifmw_reproducer_basedir,
        'artifacts',
        'cifmw_ocp_access_key') |
         path_join
      }}

- name: Slurp content of the devscripts kubeconfig
  register: _devscripts_kubeconfig
  ansible.builtin.slurp:
    path: >-
      {{
        (ansible_user_dir,
         'src/github.com/openshift-metal3',
         'dev-scripts/ocp/ocp/auth/kubeconfig') |
         path_join
      }}

- name: Slurp content of the devscripts kubeadmin-password
  register: _devscripts_kubeadm
  ansible.builtin.slurp:
    path: >-
      {{
        (ansible_user_dir,
         'src/github.com/openshift-metal3',
         'dev-scripts/ocp/ocp/auth/kubeadmin-password') |
         path_join
      }}
