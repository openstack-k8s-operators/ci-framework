---
# various_vars
- name: Filter Ansible variable files and set as fact
  vars:
    provided_file: "{{ various_file_item | replace('@','') }}"
  ansible.builtin.include_tasks: var_file.yml
  loop: "{{ various_vars | select('match', '^@.*\\.(yml|yaml)$') | list }}"
  loop_control:
    loop_var: various_file_item

- name: Filter just dict and set as fact
  ansible.builtin.set_fact:
    "{{ various_item.key }}": "{{ various_item.value }}"
    cacheable: true
  loop: "{{ (various_vars | select('mapping') | list) | map('dict2items') | flatten }}"
  loop_control:
    loop_var: various_item
