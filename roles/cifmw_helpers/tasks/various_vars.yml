---
# various_vars
- name: Filter Ansible variable files and set as fact
  vars:
    provided_file: "{{ item | replace('@','') }}"
  ansible.builtin.include_tasks: var_file.yml
  loop: "{{ various_vars | select('match', '^@.*\\.(yml|yaml)$') | list }}"

- name: Filter just dict and set as fact
  ansible.builtin.set_fact:
    "{{ item.key }}": "{{ item.value }}"
    cacheable: true
  loop: "{{ (various_vars | select('mapping') | list) | map('dict2items') | flatten }}"
