---
# Copyright Red Hat, Inc.
# All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License"); you may
# not use this file except in compliance with the License. You may obtain
# a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.

# ============================================================================
# Update Control Flags
# ============================================================================
# Enable/disable entire workflow
cifmw_fdp_update_container_packages: true

# Granular control over what to update:
# 1. Update control plane pod/container images
cifmw_fdp_update_container_images_update_control_plane_images: true

# 2. Update EDPM compute container images (updates NodeSets with custom images)
cifmw_fdp_update_container_images_update_edpm_images: true

# 3. Update packages on EDPM compute node hosts (e.g., openvswitch)
cifmw_fdp_update_container_images_update_edpm_host_packages: true

# ============================================================================
# Base Configuration
# ============================================================================

# Base directory for artifacts and temporary files
cifmw_fdp_update_container_images_basedir: "{{ cifmw_basedir | default(ansible_user_dir ~ '/ci-framework-data') }}"

# OpenShift namespace where OpenStack is deployed
cifmw_fdp_update_container_images_namespace: "openstack"

# Name of the OpenStackVersion custom resource
cifmw_fdp_update_container_images_openstack_cr_name: "controlplane"

# Target package to update (REQUIRED - must be set by user)
cifmw_fdp_update_container_images_target_package: ""

# List of images to update with the target package
# Only these images will be updated (no package scanning is performed)
cifmw_fdp_update_container_images_images_to_scan:
  - ovnControllerImage
  - ovnControllerOvsImage
  - ovnNbDbclusterImage
  - ovnNorthdImage
  - ovnSbDbclusterImage
  - ceilometerSgcoreImage

# Repository configuration
cifmw_fdp_update_container_images_repo_name: "custom-repo"
cifmw_fdp_update_container_images_repo_baseurl: ""  # REQUIRED - must be set by user
cifmw_fdp_update_container_images_repo_enabled: 1
cifmw_fdp_update_container_images_repo_gpgcheck: 0
cifmw_fdp_update_container_images_repo_priority: 0
cifmw_fdp_update_container_images_repo_sslverify: 0

# Image registry configuration
# External registry URL (for compute nodes/EDPM and pushing images)
# Leave empty to auto-detect external route from OpenShift cluster
cifmw_fdp_update_container_images_image_registry: ""

# Internal registry URL (for OpenShift pods to pull images)
# This is auto-detected and should not normally need to be changed
cifmw_fdp_update_container_images_image_registry_internal: "image-registry.openshift-image-registry.svc:5000"

# Image naming
cifmw_fdp_update_container_images_image_name_prefix: "updated"

# Podman/Container configuration
cifmw_fdp_update_container_images_tls_verify: true

# Temporary directory for build context
cifmw_fdp_update_container_images_temp_dir: ""

# DNF update arguments
cifmw_fdp_update_container_images_update_dnf_args: "--disablerepo='*' --enablerepo={{ cifmw_fdp_update_container_images_repo_name }}"

# Internal variables (do not override)
_cifmw_fdp_update_container_images_modified_images: []
_cifmw_fdp_update_container_images_updated_cr_keys: []
_cifmw_fdp_update_container_images_total_images: 0
_cifmw_fdp_update_container_images_processed_images: 0
