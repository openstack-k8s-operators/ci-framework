apiVersion: core.openstack.org/v1beta1
kind: OpenStackVersion
metadata:
  name: {{ cifmw_update_containers_metadata }}
  namespace: {{ cifmw_update_containers_namespace }}
spec:
  customContainerImages:
{% if cifmw_update_containers_openstack | bool %}
{# Set the container registry url with container prefix #}
{% set _container_url_with_prefix = (cifmw_update_containers_registry, cifmw_update_containers_org, cifmw_update_containers_prefix) | path_join %}
    aodhAPIImage: {{ _container_url_with_prefix }}-aodh-api:{{ cifmw_update_containers_tag }}
    aodhEvaluatorImage: {{ _container_url_with_prefix }}-aodh-evaluator:{{ cifmw_update_containers_tag }}
    aodhListenerImage: {{ _container_url_with_prefix }}-aodh-listener:{{ cifmw_update_containers_tag }}
    aodhNotifierImage: {{ _container_url_with_prefix }}-aodh-notifier:{{ cifmw_update_containers_tag }}
    barbicanAPIImage: {{ _container_url_with_prefix }}-barbican-api:{{ cifmw_update_containers_tag }}
    barbicanKeystoneListenerImage: {{ _container_url_with_prefix }}-barbican-keystone-listener:{{ cifmw_update_containers_tag }}
    barbicanWorkerImage: {{ _container_url_with_prefix }}-barbican-worker:{{ cifmw_update_containers_tag }}
    ceilometerCentralImage: {{ _container_url_with_prefix }}-ceilometer-central:{{ cifmw_update_containers_tag }}
    ceilometerComputeImage: {{ _container_url_with_prefix }}-ceilometer-compute:{{ cifmw_update_containers_tag }}
    ceilometerIpmiImage: {{ _container_url_with_prefix }}-ceilometer-ipmi:{{ cifmw_update_containers_tag }}
    ceilometerNotificationImage: {{ _container_url_with_prefix }}-ceilometer-notification:{{ cifmw_update_containers_tag }}
    cinderAPIImage: {{ _container_url_with_prefix }}-cinder-api:{{ cifmw_update_containers_tag }}
    cinderBackupImage: {{ _container_url_with_prefix }}-cinder-backup:{{ cifmw_update_containers_tag }}
    cinderSchedulerImage: {{ _container_url_with_prefix }}-cinder-scheduler:{{ cifmw_update_containers_tag }}
    cinderVolumeImage: {{ _container_url_with_prefix }}-cinder-volume:{{ cifmw_update_containers_tag }}
    edpmFrrImage: {{ _container_url_with_prefix }}-frr:{{ cifmw_update_containers_tag }}
    edpmIscsidImage: {{ _container_url_with_prefix }}-iscsid:{{ cifmw_update_containers_tag }}
    edpmLogrotateCrondImage: {{ _container_url_with_prefix }}-cron:{{ cifmw_update_containers_tag }}
    edpmMultipathdImage: {{ _container_url_with_prefix }}-multipathd:{{ cifmw_update_containers_tag }}
    edpmNeutronMetadataAgentImage: {{ _container_url_with_prefix }}-neutron-metadata-agent-ovn:{{ cifmw_update_containers_tag }}
    edpmNeutronSriovAgentImage: {{ _container_url_with_prefix }}-neutron-sriov-agent:{{ cifmw_update_containers_tag }}
    edpmOvnBgpAgentImage: {{ _container_url_with_prefix }}-ovn-bgp-agent:{{ cifmw_update_containers_tag }}
    glanceAPIImage: {{ _container_url_with_prefix }}-glance-api:{{ cifmw_update_containers_tag }}
    heatAPIImage: {{ _container_url_with_prefix }}-heat-api:{{ cifmw_update_containers_tag }}
    heatCfnapiImage: {{ _container_url_with_prefix }}-heat-api-cfn:{{ cifmw_update_containers_tag }}
    heatEngineImage: {{ _container_url_with_prefix }}-heat-engine:{{ cifmw_update_containers_tag }}
    horizonImage: {{ _container_url_with_prefix }}-horizon:{{ cifmw_update_containers_tag }}
    infraDnsmasqImage: {{ _container_url_with_prefix }}-neutron-server:{{ cifmw_update_containers_tag }}
    infraMemcachedImage: {{ _container_url_with_prefix }}-memcached:{{ cifmw_update_containers_tag }}
    ironicAPIImage: {{ _container_url_with_prefix }}-ironic-api:{{ cifmw_update_containers_tag }}
    ironicConductorImage: {{ _container_url_with_prefix }}-ironic-conductor:{{ cifmw_update_containers_tag }}
    ironicInspectorImage: {{ _container_url_with_prefix }}-ironic-inspector:{{ cifmw_update_containers_tag }}
    ironicNeutronAgentImage: {{ _container_url_with_prefix }}-ironic-neutron-agent:{{ cifmw_update_containers_tag }}
    ironicPxeImage: {{ _container_url_with_prefix }}-ironic-pxe:{{ cifmw_update_containers_tag }}
    keystoneAPIImage: {{ _container_url_with_prefix }}-keystone:{{ cifmw_update_containers_tag }}
    manilaAPIImage: {{ _container_url_with_prefix }}-manila-api:{{ cifmw_update_containers_tag }}
    manilaSchedulerImage: {{ _container_url_with_prefix }}-manila-scheduler:{{ cifmw_update_containers_tag }}
    manilaShareImage: {{ _container_url_with_prefix }}-manila-share:{{ cifmw_update_containers_tag }}
    mariadbImage: {{ _container_url_with_prefix }}-mariadb:{{ cifmw_update_containers_tag }}
    neutronAPIImage: {{ _container_url_with_prefix }}-neutron-server:{{ cifmw_update_containers_tag }}
    novaAPIImage: {{ _container_url_with_prefix }}-nova-api:{{ cifmw_update_containers_tag }}
    novaComputeImage: {{ _container_url_with_prefix }}-nova-compute:{{ cifmw_update_containers_tag }}
    novaConductorImage: {{ _container_url_with_prefix }}-nova-conductor:{{ cifmw_update_containers_tag }}
    novaNovncImage: {{ _container_url_with_prefix }}-nova-novncproxy:{{ cifmw_update_containers_tag }}
    novaSchedulerImage: {{ _container_url_with_prefix }}-nova-scheduler:{{ cifmw_update_containers_tag }}
    octaviaAPIImage: {{ _container_url_with_prefix }}-octavia-api:{{ cifmw_update_containers_tag }}
    octaviaHealthmanagerImage: {{ _container_url_with_prefix }}-octavia-health-manager:{{ cifmw_update_containers_tag }}
    octaviaHousekeepingImage: {{ _container_url_with_prefix }}-octavia-housekeeping:{{ cifmw_update_containers_tag }}
    octaviaWorkerImage: {{ _container_url_with_prefix }}-octavia-worker:{{ cifmw_update_containers_tag }}
    openstackClientImage: {{ _container_url_with_prefix }}-openstackclient:{{ cifmw_update_containers_tag }}
    ovnControllerImage: {{ _container_url_with_prefix }}-ovn-controller:{{ cifmw_update_containers_tag }}
    ovnControllerOvsImage: {{ _container_url_with_prefix }}-ovn-base:{{ cifmw_update_containers_tag }}
    ovnNbDbclusterImage: {{ _container_url_with_prefix }}-ovn-nb-db-server:{{ cifmw_update_containers_tag }}
    ovnNorthdImage: {{ _container_url_with_prefix }}-ovn-northd:{{ cifmw_update_containers_tag }}
    ovnSbDbclusterImage: {{ _container_url_with_prefix }}-ovn-sb-db-server:{{ cifmw_update_containers_tag }}
    placementAPIImage: {{ _container_url_with_prefix }}-placement-api:{{ cifmw_update_containers_tag }}
    rabbitmqImage: {{ _container_url_with_prefix }}-rabbitmq:{{ cifmw_update_containers_tag }}
    swiftAccountImage: {{ _container_url_with_prefix }}-swift-account:{{ cifmw_update_containers_tag }}
    swiftContainerImage: {{ _container_url_with_prefix }}-swift-container:{{ cifmw_update_containers_tag }}
    swiftObjectImage: {{ _container_url_with_prefix }}-swift-object:{{ cifmw_update_containers_tag }}
    swiftProxyImage: {{ _container_url_with_prefix }}-swift-proxy-server:{{ cifmw_update_containers_tag }}
{% if cifmw_update_containers_cindervolumes | length > 0     %}
    cinderVolumeImages:
{% for vol in cifmw_update_containers_cindervolumes          %}
      {{ vol }}: {{ _container_url_with_prefix }}-cinder-volume:{{ cifmw_update_containers_tag }}
{% endfor                                                    %}
{% endif                                                     %}
{% if cifmw_update_containers_manilashares | length > 0      %}
    manilaShareImages:
{% for shares in cifmw_update_containers_manilashares        %}
      {{ shares }}: {{ _container_url_with_prefix }}-manila-share:{{ cifmw_update_containers_tag }}
{% endfor                                                    %}
{% endif                                                     %}
{% endif                                                     %}
{% if cifmw_update_containers_edpm_image_url is defined %}
    osContainerImage: {{ cifmw_update_containers_edpm_image_url }}
{% endif %}
{% if cifmw_update_containers_ipa_image_url is defined %}
    ironicPythonAgentImage: {{ cifmw_update_containers_ipa_image_url }}
{% endif %}
{% if cifmw_update_containers_ansibleee_image_url is defined %}
    ansibleeeImage: {{ cifmw_update_containers_ansibleee_image_url }}
{% endif %}
