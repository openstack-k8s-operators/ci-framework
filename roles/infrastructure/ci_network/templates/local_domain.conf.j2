# This file is generated by ci-framework tool
listen-address={{ config.listen_addresses | join(',') }}

{% if 'interfaces' in config %}
{% for interface in config.interfaces %}
interface={{ interface }}
{% endfor %}
{% endif %}

addn-hosts=/etc/hosts

{% if 'domains' in config %}
{% for domain in config.domains %}
local=/{{ domain }}/
{% endfor %}
{% endif %}

{% if 'addresses' in config %}
{% for address in config.addresses %}
address=/{{ address.fqdn }}/{{ address.address }}
{% endfor %}
{% endif %}


{% if 'dhcp' in config %}
{% set dhcp_config = config['dhcp'] %}
dhcp-authoritative

{% if 'exclude_interfaces' in dhcp_config %}
no-dhcp-interface={{ dhcp_config['exclude_interfaces'] | join(',') }}
{% endif %}

{% if 'domain' in dhcp_config %}
domain={{ dhcp_config['domain'] }}
{% endif %}
{% if 'range' in dhcp_config %}
{% set dhcp_range = dhcp_config['range'] %}
dhcp-range={{ dhcp_range['start'] }},{{ dhcp_range['end'] }},{{dhcp_range.lease_time | default("12h")}}
{% endif %}
{% for opt, value in (dhcp_config['options'] | default({})).items() %}
dhcp-option={{ opt }},{{ value }}
{% endfor %}
{% endif %}
