# deploy_bmh

This role will creates, and eventually apply, the CR required to
deploy a set of compute nodes using MetalÂ³.

The resulting CR will contain, for each node, the following objects:

* a `Secret` (type `Opaque`) CR with the credentials of the (v)bmc resources
* a `BareMetalHost` CR with the required parameters

## Parameters

* `cimfw_deploy_bmh_basedir`: (*string*) Base directory. Defaults to `cifmw_basedir` which defaults to `~/ci-framework-data`.
* `cimfw_deploy_bmh_parameters_file`:  (*string*) Path of the file which contains (v)bmc parameters. Defaults to `cimfw_deploy_bmh_basedir + /parameters/baremetal-info.yml`
* `cimfw_deploy_bmh_dest_file`: (*string*) Path of the CR file generated by the template. Defaults to `cimfw_deploy_bmh_basedir + /artifacts/deploy_bmh/bmh.yml`
* `cimfw_deploy_bmh_apply_cr`: (*boolean*) Toggle to enable/disable applying of the generated CR in an OCP cluster. Defaults to `true`
* `cimfw_deploy_bmh_namespace`: (*string*) The namespace where the resources should be created. Defaults to `openstack`openstack
* `cimfw_deploy_bmh_boot_interface`: (*string*) The interface used for PXE booting. Defaults to `provision`
* `cimfw_deploy_bmh_disable_certificate_validation`: (*boolean*) Toggle for certificate validation while connecting to the BMC via HTTPS. Defaults to `true`

## Examples

For a comprehensive example, refers to the molecule default scenario provided with this role.

```yaml
- name: Call deploy_bmh role
  hosts: all
  tasks:
    - name: Include deploy_bmh role
      ansible.builtin.include_role:
        name: "deploy_bmh"
```
