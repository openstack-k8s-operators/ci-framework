---
#
# Setup repositories for PCP package installation.
# Used by both CoreOS nodes and network infrastructure nodes.
#
- name: Set repositories
  become: true
  block:
    - name: Set repositories (BaseOS)
      ansible.builtin.yum_repository:
        file: pcp-repo-setup
        name: baseos
        description: BaseOS repository
        baseurl: "{{ pcp_repo_url }}/BaseOS/$basearch/os/"
        gpgcheck: false

    - name: Set repositories (AppStream)
      ansible.builtin.yum_repository:
        file: pcp-repo-setup
        name: appstream
        description: AppStream repository
        baseurl: "{{ pcp_repo_url }}/AppStream/$basearch/os/"
        gpgcheck: false
