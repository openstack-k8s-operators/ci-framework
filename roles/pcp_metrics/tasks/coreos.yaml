---
#
# NOTE(sdatko): The OCP nodes we use have no yum repositories, so I add some.
#               In CoreOS, things typically should be deployed as containers
#               or in the layered filesystem via the rpm-ostree package tool.
#               However, this requires either a lot of space or system reboot
#               while all I need is to install a small service and enable it.
#               So, this play allows to setup the PCP easily in our CI jobs,
#               even though it may not be the way advised for real-world env.
#
- name: Setup repositories for PCP
  ansible.builtin.include_tasks: repo.yml

- name: Make /usr writable
  become: true
  ansible.posix.mount:
    path: /usr
    state: remounted
    opts: rw

- name: Create required directory
  become: true
  ansible.builtin.file:
    path: /var/lib/rpm-state
    state: directory
    mode: "0750"
