# Available hooks description

## ceph-deploy.yml
This hook allow to deploy the "toy ceph" as explained [here](https://github.com/fultonj/zed/tree/main/edpm).
### Output
* `cifmw_ceph_conf`: secret generated by the ceph installation, to be used for
consumers (base64 encoded).
* `cifmw_ceph_fsid`: ceph FSID generated by the ceph installation.

## ceph.yml
This playbook was moved from `playbooks/ceph.yml` to `hooks/playbooks` location
on removing "import_playbook" usage in ci-framework project.
### Input
* `cifmw_admin_user`: (string) The administrative user account
* `cifmw_ceph_target`: (string) The target host or node where the Ceph cluster will be deployed
* `storage_network_range`: (string) The IP address range for the Ceph public network
* `storage_mgmt_network_range`: (string) The IP address range for the Ceph cluster management network
* `cifmw_cephadm_pools`: (list) A list of Ceph storage pools to be created during deployment
* `cifmw_cephadm_keys`: (list): A list of Ceph client keys to be generated for accessing the Ceph cluster
* `cifmw_cephadm_vip`: (string): The virtual IP address for the Ceph monitor
* `cifmw_cephadm_certificate` (string): The path to or content of the SSL certificate
* `cifmw_cephadm_key`: (string) The path to or content of the SSL key associated with the cifmw_cephadm_certificate.
* `cifmw_cephadm_cluster`: (string) The name or identifier of the Ceph cluster to be deployed
### Output
None

## kustomize_cr.yml
This hook enables customization of CR files, using oc kustomize.
### Input
* `cifmw_kustomize_cr_artifact_dir`: (Optional) Destination directory to place the
generated kustomized CR file. Defaults to "*{{ ansible_user_dir }}/ci-framework-data/kustomize_cr*".
* `cifmw_kustomize_cr_include_vars`: (Optional) List of files to be loaded
before running kustomize.
* `cifmw_kustomize_cr_file_path`: Path to directory containing the CR file.
* `cifmw_kustomize_cr_file_name`: File name of the CR file to be kustomized.
* `cifmw_kustomize_cr_template`: Relative path to kustomization template file.
This path should be relative to hook playbook directory.
### Output
* `kustomized_{{ cifmw_kustomize_cr_file_name }}`: Kustomized file which is
available at *cifmw_kustomize_cr_artifact_dir* to be consumed by the deployment.

## kuttl_openstack_prep.yml
This hook provides openstack_prep variables for kuttl tests.
### Input
None
### Output
* `cifmw_kuttl_openstack_prep_vars`: Environment variable to be used during openstack_prep
step in install_yamls.

## noop.yml
Just a dummy hook, mostly used as a demonstrator of the hook workflow.

It doesn't have any output.

## rabbitmq_tuning.yml
Tunes rabbitmq with more conservative resources. Useful for small environment,
such as CI.

It doesn't have any output.

## restart_nova_scheduler.yml
Restarts nova-scheduler in order to refresh known cells. Useful in CI, mostly,
but may be used elsewhere in case you want to add compute/cells.

It doesn't have any output.

## validate_podified_deployment.yml
Ensure podified deployment is successful by checking the running pods/services.

It doesn't have any output.

## link2file.yml

This play replaces the given soft links with their respective source files. It
is required to avoid kustomize errors when using symbolic links. This play has
no output.

### Required variables - link2file

* `cifmw_link2file_files` (str) A comma separated string of file names to be
  replaced.
