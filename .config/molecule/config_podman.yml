---
driver:
  name: podman

log: true

platforms:
  - name: instance
    hostname: instance
    image: "ubi9/ubi-init"
    registry:
      url: "registry.access.redhat.com"
    command: "sleep infinity"
    privileged: true
    environment:
      http_proxy: "{{ lookup('env', 'http_proxy') }}"
      https_proxy: "{{ lookup('env', 'https_proxy') }}"
    ulimits:
      - host

provisioner:
  inventory:
    hosts:
      all:
        hosts:
          instance:
            ansible_python_interpreter: /usr/bin/python3
    # NOTE: if group_vars does not exists, molecule would raise various errors,
    # e.g. Failed command was: ( umask 77 && mkdir -p "` echo /tmp
    # Remove group_vars parameter or create such directory: <role>/molecule/<scenario>/group_vars
    links:
      group_vars: group_vars/
  name: ansible
  log: true
  env:
    ANSIBLE_STDOUT_CALLBACK: yaml
  config_options:
    defaults:
      remote_tmp: /tmp
