---
# Common parameters for SNO (Single Node OpenShift) based deployment.
# This file groups common parameters similar to va-common.yml but for SNO.
#
# SNO is a standard OCP deployment with a single control plane node
# (num_masters: 1, num_workers: 0). It follows OCP 4.18 SNO best practices:
# - Minimum: 8 vCPU, 16GB RAM, 120GB storage
# - OVN-Kubernetes network plugin (required, OpenShiftSDN not supported)
# - Suitable for edge computing, testing, and development environments
#
# Reference: https://docs.redhat.com/en/documentation/openshift_container_platform/4.18/html/installing_on_a_single_node/
#
# Any of these parameters can be overridden from your own parameter file!

# Ensure basic directories and PATH are set
cifmw_path: "{{ ansible_user_dir }}/bin:{{ ansible_env.PATH }}"

# Ensure our vbmcd doesn't conflict with devscripts managed instance
cifmw_virtualbmc_daemon_port: 50881

# Use libvirt backend
cifmw_use_libvirt: true

# Dependencies for devscripts
cifmw_reproducer_epel_pkgs:
  - python3-bcrypt
  - python3-passlib

# Public network for devscripts
cifmw_libvirt_manager_pub_net: ocpbm

# Run tests
cifmw_run_tests: true
cifmw_run_test_role: test_operator
cifmw_test_operator_timeout: 7200
cifmw_test_operator_tempest_include_list: |
  tempest.scenario.test_network_basic_ops.TestNetworkBasicOps

# Set VM partitions and boot mode
cifmw_use_uefi: true
cifmw_root_partition_id: 4

# Default compute node configuration (for EDPM)
# SNO scenarios typically use fewer computes
cifmw_libvirt_manager_compute_amount: 1
cifmw_libvirt_manager_compute_disksize: 50
cifmw_libvirt_manager_compute_memory: 8
cifmw_libvirt_manager_compute_cpus: 4

# SSH key configuration
cifmw_ssh_keytype: ecdsa
cifmw_ssh_keysize: 521

# ============================================
# OCP deployment via devscripts
# ============================================
cifmw_use_devscripts: true

# Required for egress traffic from pods to the osp_trunk network
cifmw_devscripts_enable_ocp_nodes_host_routing: true

# Enable storage services on the single OCP node
cifmw_devscripts_enable_iscsi_on_ocp_nodes: true
cifmw_devscripts_enable_multipath_on_ocp_nodes: true
cifmw_devscripts_create_logical_volume: true
