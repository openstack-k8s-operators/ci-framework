---
cifmw_control_plane_ceph_backend_include_vars:
  - "{{ cifmw_basedir }}/artifacts/pre_deploy_ceph_deploy.yml"

cifmw_install_yamls_vars:
  BMO_SETUP: false
  STORAGE_CLASS: crc-csi-hostpath-provisioner
  INSTALL_CERT_MANAGER: false

cifmw_edpm_prepare_skip_crc_storage_creation: true

cifmw_make_ceph_environment:
  CEPH_TIMEOUT: 90
  CEPH_DATASIZE: "10Gi"

pre_deploy:
  - name: Ceph deploy
    type: playbook
    source: ceph-deploy.yml
  - name: Kustomize OpenStack CR with Ceph
    type: playbook
    source: control_plane_ceph_backends.yml

cifmw_services_manila_enabled: true

pre_tempest:
  - name: Create manila resources
    type: playbook
    source: manila_create_default_resources.yml

cifmw_run_tests: true
cifmw_tempest_container: openstack-tempest-all
cifmw_tempest_default_groups: &test_operator_list
  - openstack-operator
  - cinder-operator
  - keystone-operator
  - manila-operator
cifmw_tempest_default_jobs: *test_operator_list

cifmw_tempest_tests_allowed_override_scenario: true

cifmw_tempest_tempestconf_profile:
  create: true
  debug: true
  os_cloud: default
  overrides:
    identity.v3_endpoint_type: public
    share.run_share_group_tests: "False"
    share.capability_storage_protocol: CEPHFS
    share.suppress_errors_in_cleanup: "True"
